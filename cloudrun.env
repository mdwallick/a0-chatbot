# -----------------------------------------------------------------------------
# Cloud Run Deployment Configuration
# -----------------------------------------------------------------------------

# --- Project and Service Identification ---
PROJECT_ID="thorax-studios"
SERVICE_NAME="a0-chatbot"
REGION="us-central1" # e.g., us-central1, europe-west1
REPO_NAME="cloudbuild"

# --- Container Image & Build ---
# Option 1: Build from source (set SOURCE_PATH and DOCKERFILE_PATH)
SOURCE_PATH="." # Path to your application source code (relative to deploy.sh or absolute)
# DOCKERFILE_PATH="Dockerfile" # Path to your Dockerfile within SOURCE_PATH
# Option 2: Use a pre-built image (if using this, SOURCE_PATH and DOCKERFILE_PATH are ignored by the build step)
# PRE_BUILT_IMAGE_URL="gcr.io/your-gcp-project-id/my-prebuilt-app:latest" # Example

# Artifact Registry settings (ensure the repository exists or script will try to create it)
# ARTIFACT_REGISTRY_REPO_NAME="my-app-repo" # Name of your Artifact Registry Docker repository
# IMAGE_NAME_IN_REGISTRY="${SERVICE_NAME}" # Image name in Artifact Registry (defaults to service name)
# IMAGE_TAG="latest" # You can use $(git rev-parse --short HEAD) for git commit hash based tags

# --- Cloud Run Service Configuration ---
# Service account for the Cloud Run service (leave empty for default Compute Engine service account)
# Ensure this service account has 'Secret Manager Secret Accessor' role for the secrets used.
RUN_SERVICE_ACCOUNT="a0-chatbot-so@thorax-studios.iam.gserviceaccount.com" # e.g., "my-run-sa@${PROJECT_ID}.iam.gserviceaccount.com"

ALLOW_UNAUTHENTICATED="true" # "true" or "false"
PORT="8080" # The port your application listens on inside the container
CPU="1" # Number of vCPUs
MEMORY="512Mi" # e.g., 256Mi, 1Gi
MIN_INSTANCES="0" # Default is 0
MAX_INSTANCES="1" # Adjust as needed
CONCURRENCY="80" # Default is 80
TIMEOUT_SECONDS="300" # Max request timeout

# --- Environment Variables (non-secret) ---
# Comma-separated list of KEY=VALUE pairs
# Example: ENV_VARS="NODE_ENV=production,API_BASE_URL=https://api.example.com"
#ENV_VARS="OPENAI_MODEL=gpt-4o-mini,APP_BASE_URL=http://localhost:3000,AUTH0_DOMAIN=genai.atko.rocks,AUTH0_CLIENT_ID=hTJH2emvkQTtAntzfzwXJ1EewJZNesL5,AUTH0_CLIENT_ID_MGMT=hTJH2emvkQTtAntzfzwXJ1EewJZNesL5,AUTH0_ISSUER_BASE_URL=https://genai-8794913713030954.us.auth0.com,ENABLED_CONNECTIONS='{\"google-oauth2\":\"con_6czLqP6FKqABE6uX\",\"oidc\":\"con_hL2neUBSuPAWeies\",\"windowslive\":\"con_oQXicYYPfe9LbQiZ\"}',SALESFORCE_LOGIN_URL=https://orgfarm-0f9ccd6b9f-dev-ed.develop.my.salesforce.com"
ENV_VARS_FILE="env.yaml" # Or the path to your YAML file, e.g., "config/env.yaml"

# --- Secrets ---
# Secrets to be mounted as environment variables.
# Comma-separated list of ENV_VAR_NAME=SECRET_NAME:VERSION
# Example: SECRETS_AS_ENV_VARS="DB_PASSWORD=my-db-password:latest,API_KEY=my-api-key:1"
SECRETS_AS_ENV_VARS="OPENAI_API_KEY=openai-api-key:latest,AUTH0_CLIENT_SECRET=a0-chatbot-client-secret:latest,AUTH0_CLIENT_SECRET_MGMT=a0-chatbot-client-secret:latest,AUTH0_SECRET=a0-chatbot-encrypt-secret:latest"

# Secrets to be mounted as volumes (files).
# Comma-separated list of /mount/path/filename=SECRET_NAME:VERSION
# Example: SECRETS_AS_VOLUMES="/etc/secrets/service-account.json=gcp-sa-key:latest"
# The path will be relative to the container, e.g., /mnt/secrets/my-secret-file
SECRETS_AS_VOLUMES="" # e.g., "/etc/app/config.json=app-config-secret:2"


# --- Advanced ---
# VPC Connector (leave empty if not needed)
# Format: projects/PROJECT_ID/locations/REGION/connectors/CONNECTOR_NAME
VPC_CONNECTOR=""
# SQL Connections (leave empty if not needed)
# Format: projects/PROJECT_ID/locations/REGION/instances/INSTANCE_NAME,...
CLOUD_SQL_INSTANCES="" # e.g., "${PROJECT_ID}:${REGION}:my-sql-instance"

# Cloud Build Timeout (e.g., 1200s, 20m, 1h)
CLOUD_BUILD_TIMEOUT="20m"
